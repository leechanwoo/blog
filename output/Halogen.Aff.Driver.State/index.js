// Generated by purs version 0.12.5
"use strict";
var Data_Foldable = require("../Data.Foldable/index.js");
var Data_Functor = require("../Data.Functor/index.js");
var Data_List_Types = require("../Data.List.Types/index.js");
var Data_Map_Internal = require("../Data.Map.Internal/index.js");
var Data_Maybe = require("../Data.Maybe/index.js");
var Effect_Ref = require("../Effect.Ref/index.js");
var Unsafe_Coerce = require("../Unsafe.Coerce/index.js");
var DriverState = function (x) {
    return x;
};
var unRenderStateX = Unsafe_Coerce.unsafeCoerce;
var unDriverStateX = Unsafe_Coerce.unsafeCoerce;
var renderStateX_ = function (dictApplicative) {
    return function (f) {
        return unDriverStateX(function (st) {
            return Data_Foldable.traverse_(dictApplicative)(Data_Foldable.foldableMaybe)(f)(st.rendering);
        });
    };
};
var mkRenderStateX = function (v) {
    return Unsafe_Coerce.unsafeCoerce;
};
var renderStateX = function (dictFunctor) {
    return function (f) {
        return unDriverStateX(function (st) {
            return mkRenderStateX(st.prjQuery)(f(st.rendering));
        });
    };
};
var mkDriverStateXRef = Unsafe_Coerce.unsafeCoerce;
var initDriverState = function (component) {
    return function (input) {
        return function (handler) {
            return function (prjQuery) {
                return function (lchs) {
                    return function __do() {
                        var v = Effect_Ref["new"]({})();
                        var v1 = Effect_Ref["new"](Data_Map_Internal.empty)();
                        var v2 = Effect_Ref["new"](Data_Map_Internal.empty)();
                        var v3 = Effect_Ref["new"](Data_Functor.voidLeft(Data_Maybe.functorMaybe)(component.initializer)(Data_List_Types.Nil.value))();
                        var v4 = Effect_Ref["new"](new Data_Maybe.Just(Data_List_Types.Nil.value))();
                        var v5 = Effect_Ref["new"](Data_Maybe.Nothing.value)();
                        var v6 = Effect_Ref["new"](0)();
                        var v7 = Effect_Ref["new"](new Data_Maybe.Just(Data_Map_Internal.empty))();
                        var ds = {
                            component: component,
                            state: component.initialState(input),
                            refs: Data_Map_Internal.empty,
                            children: Data_Map_Internal.empty,
                            childrenIn: v1,
                            childrenOut: v2,
                            selfRef: v,
                            handler: handler,
                            pendingQueries: v3,
                            pendingOuts: v4,
                            pendingHandlers: v5,
                            rendering: Data_Maybe.Nothing.value,
                            prjQuery: prjQuery,
                            fresh: v6,
                            subscriptions: v7,
                            lifecycleHandlers: lchs
                        };
                        Effect_Ref.write(ds)(v)();
                        return mkDriverStateXRef(v);
                    };
                };
            };
        };
    };
};
module.exports = {
    DriverState: DriverState,
    unDriverStateX: unDriverStateX,
    mkDriverStateXRef: mkDriverStateXRef,
    renderStateX: renderStateX,
    renderStateX_: renderStateX_,
    unRenderStateX: unRenderStateX,
    initDriverState: initDriverState
};
